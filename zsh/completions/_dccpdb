#compdef dccpdb
compdef _dccpdb dccpdb

# Helper function to get Docker Compose service names
function _docker_compose_services() {
    local -a services

    services=($(docker compose config --services 2>/dev/null))

    if (( ${#services} > 0 )); then
        _describe 'Docker Compose services' services
    fi
}

function _dccpdb() {
  local state
  local -a args

  _arguments \
    '1:sql dump path:_files' \
    '2:service:_docker_compose_services' \
    '*::args:_nothing'
}